(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7310],{61105:function(a,b,c){"use strict";c.d(b,{n5:function(){return l}});var d=c(16441),e=c(38197),f=c(29251),g=c(639),h=c(1581),i=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(b){f(b)}}function h(a){try{i(d.throw(a))}catch(b){f(b)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};let j=new h.Yd("wallet/5.7.0");class k extends null{constructor(a,b){var c;if(super(),null!=(c=a)&&isHexString(c.privateKey,32)&&null!=c.address){let d=new SigningKey(a.privateKey);if(defineReadOnly(this,"_signingKey",()=>d),defineReadOnly(this,"address",computeAddress(this.publicKey)),this.address!==getAddress(a.address)&&j.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(a){let b=a.mnemonic;return b&&b.phrase}(a)){let e=a.mnemonic;defineReadOnly(this,"_mnemonic",()=>({phrase:e.phrase,path:e.path||defaultPath,locale:e.locale||"en"}));let f=this.mnemonic,g=HDNode.fromMnemonic(f.phrase,null,f.locale).derivePath(f.path);computeAddress(g.privateKey)!==this.address&&j.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else defineReadOnly(this,"_mnemonic",()=>null)}else{if(SigningKey.isSigningKey(a))"secp256k1"!==a.curve&&j.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),defineReadOnly(this,"_signingKey",()=>a);else{"string"==typeof a&&a.match(/^[0-9a-f]*$/i)&&64===a.length&&(a="0x"+a);let h=new SigningKey(a);defineReadOnly(this,"_signingKey",()=>h)}defineReadOnly(this,"_mnemonic",()=>null),defineReadOnly(this,"address",computeAddress(this.publicKey))}b&&!Provider.isProvider(b)&&j.throwArgumentError("invalid provider","provider",b),defineReadOnly(this,"provider",b||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(a){return new k(this,a)}signTransaction(a){return resolveProperties(a).then(b=>{null!=b.from&&(getAddress(b.from)!==this.address&&j.throwArgumentError("transaction from address mismatch","transaction.from",a.from),delete b.from);let c=this._signingKey().signDigest(keccak256(serialize(b)));return serialize(b,c)})}signMessage(a){return i(this,void 0,void 0,function*(){return joinSignature(this._signingKey().signDigest(hashMessage(a)))})}_signTypedData(a,b,c){return i(this,void 0,void 0,function*(){let d=yield _TypedDataEncoder.resolveNames(a,b,c,a=>(null==this.provider&&j.throwError("cannot resolve ENS names without a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:a}),this.provider.resolveName(a)));return joinSignature(this._signingKey().signDigest(_TypedDataEncoder.hash(d.domain,b,d.value)))})}encrypt(a,b,c){if("function"!=typeof b||c||(c=b,b={}),c&&"function"!=typeof c)throw Error("invalid callback");return b||(b={}),encryptKeystore(this,a,b,c)}static createRandom(a){let b=randomBytes(16);a||(a={}),a.extraEntropy&&(b=arrayify(hexDataSlice(keccak256(concat([b,a.extraEntropy])),0,16)));let c=entropyToMnemonic(b,a.locale);return k.fromMnemonic(c,a.path,a.locale)}static fromEncryptedJson(a,b,c){return decryptJsonWallet(a,b,c).then(a=>new k(a))}static fromEncryptedJsonSync(a,b){return new k(decryptJsonWalletSync(a,b))}static fromMnemonic(a,b,c){return b||(b=defaultPath),new k(HDNode.fromMnemonic(a,null,c).derivePath(b))}}function l(a,b){var c;return(0,g.RJ)(("string"==typeof(c=a)&&(c=(0,f.Y0)(c)),(0,e.w)((0,d.zo)([(0,f.Y0)("\x19Ethereum Signed Message:\n"),(0,f.Y0)(String(c.length)),c]))),b)}},64886:function(a,b,c){"use strict";c.r(b),b.default={src:"/_next/static/media/cons.3d2aa7cc.svg",height:16,width:16}},73168:function(a,b,c){"use strict";c.r(b),b.default={src:"/_next/static/media/pros.ee1528b5.svg",height:16,width:16}},44057:function(a,b,c){"use strict";c.d(b,{Z:function(){return I}});var d=c(85893),e=c(67294),f=c(11163),g=c(25675),h=c.n(g),i=c(87344),j=c(86501),k=c(86010),l=c(1852),m=c(29208),n=c.n(m),o=c(99245),p=c.n(o),q=c(21405),r=c(22243),s=c(9005),t=c(75960),u=c(94374),v=c(65059),w=c(7235),x=c(16978),y=c(49246),z=c.n(y),A=function(a){var b,c,g=a.data,h=a.index,i=a.defaultLikeStatus,j=a.currentResource,l=(0,e.useState)(!1),m=l[0],o=l[1],p=(0,f.useRouter)(),q=(null==g?void 0:g.comment)||"",r=null===(b=g.user)|| void 0===b?void 0:null===(c=b.data)|| void 0===c?void 0:c.attributes,s=(0,e.useState)(!1),t=s[0],u=s[1];(0,e.useEffect)(function(){var a,b=(a="commentContent_".concat(h),document.getElementById(a).offsetHeight>=168);o(b)},[h]);var y=function(){var a=n()(g,"user.data.id");a&&p.push("/user/[id]","/user/".concat(a))},A=(0,e.useMemo)(function(){var a="",b=n()(r,"firstName"),c=n()(r,"lastName"),d=n()(r,"walletAddress");return b&&(a+=b),c&&(a+=" ".concat(c)),(a=a.trim())||(a="Anonymous-".concat(null==d?void 0:d.slice(-5))),a},[r]),B=(0,e.useMemo)(function(){var a="";return(null==r?void 0:r.rank)&&(a+=r.rank),(null==r?void 0:r.level)&&(null==r?void 0:r.rank)&&(a+=" - Level ".concat(r.level)),a||""},[r.level,r.rank]);return(0,d.jsxs)("div",{className:"".concat(z().comment," flex flex-col mb-2 p-6"),children:[(0,d.jsxs)("div",{className:"".concat(z().comment," flex items-center"),children:[(0,d.jsx)("div",{className:"block w-fit h-fit rounded overflow-hidden mr-3 cursor-pointer",onClick:y,children:(0,d.jsx)(v.Z,{url:n()(g,"user.data.attributes.avatar.data.attributes.url")})}),(0,d.jsxs)("div",{className:"ml-3",children:[(0,d.jsx)("p",{className:"".concat(z().username," cursor-pointer hover:underline"),onClick:y,children:A}),(0,d.jsx)("p",{className:"".concat(z().rank," mt-3"),children:B})]})]}),(0,d.jsxs)("div",{id:"commentContent_".concat(h),style:{wordBreak:"break-word"},className:(0,k.Z)(z().content,"mt-4 font-casual whitespace-pre-wrap",t?"max-h-fit":"max-h-[168px]"),children:[q,!t&&m&&(0,d.jsx)("div",{className:"".concat(z().blur)})]}),!t&&m&&(0,d.jsx)("div",{className:"w-fit self-end capitalize font-semibold text-gamefiGreen-500 text-sm leading-5 cursor-pointer hover:underline hover:opacity-95 mt-1 font-casual",onClick:function(){return u(!0)},children:"Read More"}),(0,d.jsx)("div",{className:"".concat(z().divide," mt-2 mb-4 md:mb-6")}),(0,d.jsxs)("div",{className:"flex flex-col md:flex-row justify-between",children:[(0,d.jsx)(x.Z,{like:n()(g,"likeCount"),dislike:n()(g,"dislikeCount"),comment:n()(g,"commentCount")}),(0,d.jsx)(w.Z,{likeCount:n()(g,"likeCount"),dislikeCount:n()(g,"dislikeCount"),commentCount:n()(g,"commentCount"),id:g.id,pageSource:"comment",defaultLikeStatus:i,currentResource:j})]})]})},B=function(a){var b,c=a.comments,e=a.likeStatus,f=a.currentResource;return c.map(function(a,c){return(0,d.jsx)(A,{data:a,index:c,defaultLikeStatus:null!==(b=null==e?void 0:e[a.id])&& void 0!==b?b:"",currentResource:f},"comment_".concat(c))})},C=c(24982),D=c(17003),E=c.n(D),F=[1,2,3,4,5];function G(){return(0,d.jsx)("div",{className:"".concat(z().divide)})}function H(a){var b=a.pros,e=a.cons;return(0,d.jsxs)("div",{className:"mb-7",children:[(void 0===b?[]:b).map(function(a){return(0,d.jsxs)("div",{className:"flex mb-4",children:[(0,d.jsx)("div",{className:"w-4 h-4 mt-1",children:(0,d.jsx)(h(),{src:c(73168),alt:""})}),(0,d.jsx)("p",{className:"".concat(E().pros_text," font-casual ml-[10px] w-full"),children:a.text})]},"prop_".concat(a.id))}),(void 0===e?[]:e).map(function(a){return(0,d.jsxs)("div",{className:"flex mb-4",children:[(0,d.jsx)("div",{className:"w-4 h-4 mt-1",children:(0,d.jsx)(h(),{src:c(64886),alt:""})}),(0,d.jsx)("p",{className:"".concat(E().pros_text," font-casual ml-[10px]"),children:a.text})]},"prop_".concat(a.id))})]})}var I=function(a){var b,c,g=a.data,h=a.currentResource,m=(0,f.useRouter)(),o=(0,e.useState)(""),x=o[0],y=o[1],A=(0,e.useState)(""),D=A[0],I=A[1],J=(0,e.useState)(!1),K=J[0],L=J[1],M=(0,e.useState)(""),N=M[0],O=M[1],P=(0,e.useState)(!1),Q=P[0],R=P[1],S=(0,e.useState)(""),T=S[0],U=S[1],V=(0,e.useState)({}),W=V[0],X=V[1],Y=(0,e.useState)(!1),Z=Y[0],$=Y[1],_=m.query,aa=_.id,ab=_.slug,ac=(0,l.useMediaQuery)({minWidth:"960px"}),ad=(0,q.Z)().connectWallet,ae=function(){var a,b;document.getElementById("commentTextarea").style.height=((b=20+20*((a=N).match(/\n/g)||[]).length+12+2)<64?64:b>224?224:b).toString()+"px"},af=(0,r.Z)().accountHub,ag=(0,e.useMemo)(function(){var a=new URLSearchParams;return x&&a.set("page",x),a.toString()},[x]);(0,e.useEffect)(function(){R(!0),m.push("/".concat(h,"/").concat(ab,"/reviews/").concat(aa).concat(ag?"?".concat(ag):"")).finally(function(){R(!1)})},[ag]);var ah=function(a){var b=a.walletAddress,c=a.signature;(0,s._i)("/api/hub/createComment",{method:"POST",body:JSON.stringify({comment:N,review:null==g?void 0:g.id}),headers:{"X-Signature":c,"X-Wallet-Address":b}}).then(function(a){var b=a.err;R(!1),b?j.ZP.error("Something went wrong. Please try again."):(j.ZP.success("Your comment is added."),O(""),m.replace(m.asPath))}).catch(function(a){R(!1),j.ZP.error("Something went wrong. Please try again."),console.debug("err",a)})};(0,e.useEffect)(function(){p()(af)?(U(""),X({})):ai()},[af]);var ai=function(){R(!0),(0,s._i)("/api/hub/likes/getLikesByUserId",{method:"POST",body:JSON.stringify({variables:{userId:null==af?void 0:af.id}})}).then(function(a){if(R(!1),!p()(a)){var b,c,d,e=null==a?void 0:null===(b=a.data)|| void 0===b?void 0:null===(c=b.likes)|| void 0===c?void 0:null===(d=c.data)|| void 0===d?void 0:d.reduce(function(a,b){var c=b.attributes;return"review"===c.objectType?c.objectId=== +aa&&(a.statusOfReview=c.status):a.listLikeComment[c.objectId]=c.status,a},{statusOfReview:"",listLikeComment:{}});U(e.statusOfReview),X(e.listLikeComment)}}).catch(function(a){R(!1),console.debug("err",a)})},aj=function(){L(!0),$(!0)},ak=function(){$(!1)},al=function(a){var b=a.target.value;O(b);var c=(0,s.kr)(b);c.isProfane?I(c.listText.join(", ")):I("")},am=function(a,b){m.replace(m.asPath).finally(function(){"review"===a&&U(b)})},an=function(){I(""),O("")},ao=function(){if(!N.trim()){j.ZP.error("Something went wrong. Please try again.");return}R(!0),ad().then(function(a){if(a.error){R(!1),console.debug(a.error),j.ZP.error("Something went wrong. Please try again.");return}ah(a)}).catch(function(a){R(!1),console.debug(a)})},ap=(0,e.useMemo)(function(){var a=g.likeCount;return a?1===a?"like"===T?"You liked this.":"1 other liked this.":a>=2?"like"===T?"You and ".concat((0,s.Lv)(a-1)," others liked this."):"".concat((0,s.Lv)(a)," others liked this."):void 0:""},[g.likeCount,T]),aq=(0,e.useMemo)(function(){return n()(g,"user.rates.data.[0].attributes.rate")||0},[g]);return(0,d.jsxs)("div",{className:"flex flex-col md:flex-row overflow-x-hidden",children:[(0,d.jsx)(u.Z,{user:g.user,className:"md:w-1/4 flex-none"}),(0,d.jsxs)("div",{className:"flex-1 flex flex-col mt-4 sm:mt-0",children:[(0,d.jsx)("div",{className:"flex mb-5",children:(0,d.jsxs)("p",{className:"text-2xl font-bold uppercase font-mechanic",children:["REVIEW "," ",(0,d.jsx)("a",{href:"/".concat(h,"/").concat(ab),target:"_blank",rel:"noreferrer",children:(0,d.jsx)("span",{className:"text-gamefiGreen-500 font-mechanic cursor-pointer hover:underline",children:g.gameName||""})})]})}),(0,d.jsxs)("div",{className:"".concat(z().rating_bar," h-14 w-full flex items-center mb-10 px-[18px] justify-between md:justify-start"),children:[(0,d.jsx)("div",{className:"flex gap-2",children:F.map(function(a){return(0,d.jsx)(C.Z,{selected:aq>=a,size:"20px"},"acc_review_rate_".concat(a))})}),g.publishedAt&&(0,d.jsx)("div",{className:(0,k.Z)(z().published_date,"font-casual md:justify-between"),children:ac?"Published ".concat((0,i.Z)(new Date(g.publishedAt),"d LLL, yyyy - hh:mm:ss OOO")):(0,i.Z)(new Date(g.publishedAt),"d LLL, yyyy")})]}),(0,d.jsx)("div",{className:"".concat(z().content," font-casual whitespace-pre-wrap text-base font-normal text-white mb-10"),style:{wordBreak:"break-word"},children:g.review}),(null==g?void 0:null===(b=g.pros)|| void 0===b?void 0:b.length)||(null==g?void 0:null===(c=g.cons)|| void 0===c?void 0:c.length)?(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"uppercase font-bold text-base text-white mb-6 font-mechanic",children:"Pros and Cons"}),(0,d.jsx)(H,{pros:g.pros,cons:g.cons})]}):null,(0,d.jsx)(G,{}),(0,d.jsxs)("div",{className:"flex flex-col py-2 md:py-4 md:flex-row md:gap-0 gap-2 md:justify-between md:items-center",children:[(0,d.jsx)("p",{className:"".concat(E().total_like),children:ap}),(0,d.jsx)(w.Z,{id:g.id,pageSource:"review",defaultLikeStatus:T,onChangeStatus:am,currentResource:h,notShowCount:!0})]}),(0,d.jsx)(G,{}),(0,d.jsx)("div",{className:"font-bold text-base uppercase text-white mt-10 mb-8 font[Rajdhani]",children:"COMMENTS (".concat((0,s.Lv)(null==g?void 0:g.totalComment),")")}),(0,d.jsxs)("div",{className:"".concat(E().input_comment," flex flex-col px-6 py-6 mb-2 relative"),children:[Q&&(0,d.jsx)(t.Z,{}),(0,d.jsxs)("div",{className:"flex w-full",children:[(0,d.jsx)("div",{className:"block w-fit h-fit rounded mr-3 overflow-hidden",children:(0,d.jsx)(v.Z,{url:n()(af,"avatar.url")})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("textarea",{id:"commentTextarea",className:"".concat(E().input," w-full ring-0 pt-5 h-16 flex-1 placeholder:font-semibold placeholder:text-sm hover:placeholder:text-white placeholder:font-['Poppins'] font-['Poppins']"),placeholder:Z?"":"Write your comment",onChange:al,onFocus:aj,onBlur:ak,onKeyUp:ae,value:N}),(0,d.jsx)("div",{className:"mt-2 text-normal text-red-500 ",children:D?"Please remove profane word: ".concat(D):""})]})]}),K&&(0,d.jsxs)("div",{className:"flex gap-2 self-end mt-6",children:[(0,d.jsx)("button",{className:"h-9 w-24 text-gamefiGreen-500 hover:opacity-95",onClick:an,children:"Cancel"}),(0,d.jsxs)("div",{className:"flex group",children:[(0,d.jsx)("button",{className:"".concat(E().button_submit," h-9 w-36 bg-gamefiGreen-700 group-hover:opacity-95 text-black font-bold uppercase text-sm disabled:cursor-not-allowed"),disabled:!(null==N?void 0:N.length)||!!D,onClick:ao,children:"Submit"}),(0,d.jsx)("svg",{className:"h-9 fill-gamefiGreen-700 group-hover:opacity-95",viewBox:"0 0 10 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M0 0L10 7.5V34C10 35.1046 9.10457 36 8 36H0V0Z"})})]})]})]}),(null==g?void 0:g.comments)&&(0,d.jsx)(B,{comments:null==g?void 0:g.comments,likeStatus:W,currentResource:h}),n()(g,"totalComment",0)>n()(g,"comments",[]).length&&(0,d.jsx)("div",{className:"flex mt-8 w-full justify-center items-center mb-4",children:(0,d.jsx)("div",{className:"hidden sm:inline-flex bg-gamefiGreen-600 clipped-b-l p-px rounded cursor-pointer mr-1",onClick:function(){return y("".concat(Number(x||1)+1))},children:(0,d.jsx)("span",{className:"font-mechanic bg-gamefiDark-900 text-gamefiGreen-500 hover:text-gamefiGreen-200 clipped-b-l py-2 px-16 rounded leading-5 uppercase font-bold text-[13px]",children:"Load More"})})})]})]})}},17003:function(a){a.exports={pros_text:"Detail_pros_text__4Oq3F",total_like:"Detail_total_like__bSeaI",input_comment:"Detail_input_comment__ppfV4",input:"Detail_input__iv7vE",button_submit:"Detail_button_submit__IjR60"}}}])