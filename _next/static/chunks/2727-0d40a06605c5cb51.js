(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2727],{72310:function(a,b,c){"use strict";c.d(b,{m:function(){return j},x:function(){return k}});var d=c(14924),e=c(99534),f=c(85893),g=c(62023),h=c.n(g),i=c(86010),j=function(a){var b=a.titles,c=(0,e.Z)(a,["titles"]);return(0,f.jsx)("div",{className:"my-1 w-full font-mechanic uppercase font-semibold text-gray-300 ".concat(c.className||""),children:(0,f.jsx)("div",{className:"".concat(h().menus," overflow-auto"),children:b.map(function(a,b){return a?(0,f.jsx)("div",{className:(0,i.Z)(h().menu,"text-base font-semibold",(0,d.Z)({},h().active,b===c.currentValue)),onClick:function(){return b!==c.currentValue&&c.onChange&&c.onChange(b)},children:(0,f.jsx)("span",{children:a})},a):null})})})},k=function(a){return a.value===a.index&&a.children||null}},42727:function(a,b,c){"use strict";c.d(b,{Z:function(){return A}});var d=c(85893),e=c(67294),f=c(29208),g=c.n(f),h=c(72310),i=c(52041),j=c(29815),k=c(11163),l=c(86010),m=c(99245),n=c.n(m),o=c(9005),p=c(3360),q=c(22243),r=c(1852),s=c(87344),t=c(87850),u=c(94949),v=c(19885),w=c.n(v),x=function(a){var b=a.data,c=(0,k.useRouter)(),f=(0,e.useState)(!0),h=f[0],i=f[1],j=(0,e.useState)(!1),m=j[0],n=j[1],p={name:""};switch(g()(b,"review.aggregator")?p.type="aggregator":g()(b,"review.guild")&&(p.type="guild"),p.name=g()(b,"review.".concat(p.type,".name")),p.slug=g()(b,"review.".concat(p.type,".slug")),p.type){case"aggregator":p.pageUrl="/hub/".concat(p.slug),p.thumbnailUrl=g()(b,"review.aggregator.verticalThumbnail.url");break;case"guild":p.pageUrl="/guilds/".concat(p.slug),p.thumbnailUrl=g()(b,"review.guild.banner.url")}var q=(0,r.useMediaQuery)({minWidth:"960px"}),v=(0,e.useMemo)(function(){return g()(b,"createdAt",null)},[b]);(0,e.useEffect)(function(){var a;i((a="commentContent_".concat(b.id),document.getElementById(a).offsetHeight>=168))},[]);var x=function(){var a=g()(b,"review.id");if(p.slug&&a)switch(p.type){case"aggregator":c.push("/hub/[slug]/reviews/[id]","/hub/".concat(p.slug,"/reviews/").concat(a));break;case"guild":c.push("/guilds/[slug]/reviews/[id]","/guilds/".concat(p.slug,"/reviews/").concat(a))}},y=function(){var a=g()(b,"review.author.id");a&&c.push("/user/[id]","/user/".concat(a))},z=function(){if(p.slug)switch(p.type){case"aggregator":c.push("/hub/[slug]","/hub/".concat(p.slug));break;case"guild":c.push("/guilds/[slug]","/guilds/".concat(p.slug))}};return(0,d.jsxs)("div",{className:(0,l.Z)(w().account_comment_item,"p-0 md:p-6 bg-[#21232A] rounded-[4px] mb-2"),children:[(0,d.jsxs)("div",{className:"".concat((0,l.Z)(w().game_info,"flex items-center")),children:[(0,d.jsx)("div",{className:(0,l.Z)(w().image,"overflow-hidden rounded-sm"),children:(0,d.jsx)("img",{src:p.thumbnailUrl,alt:"".concat(p.type,"_thumb"),className:"w-[60px] h-[60px] object-cover"})}),q?(0,d.jsxs)("div",{className:"ml-4 flex flex-col justify-center gap-2",children:[(0,d.jsx)("div",{className:"font-mechanic not-italic font-bold text-xl leading-[150%] uppercase text-white cursor-pointer hover:underline w-fit",onClick:x,children:g()(b,"review.title")}),(0,d.jsxs)("div",{className:"font-casual text-[13px] leading-[12px] text-white",children:[(0,d.jsx)("strong",{className:"cursor-pointer hover:underline",onClick:y,children:"".concat(g()(b,"review.author.firstName")||""," ").concat(g()(b,"review.author.lastName")||"")})," ","reviewed"," ",(0,d.jsx)("span",{className:"text-gamefiGreen-600 hover:underline cursor-pointer",onClick:z,children:p.name})]})]}):(0,d.jsx)("div",{className:(0,l.Z)(w().name,"text-gamefiGreen-600 font-semibold font-casual not-italic text-sm leading-[21px] ml-4"),children:p.name})]}),!q&&(0,d.jsx)("div",{className:"px-4 md:px-0 font-mechanic not-italic font-bold text-base leading-[150%] flex items-center uppercase text-white mt-6 cursor-pointer hover:underline w-fit",onClick:x,children:g()(b,"review.title")}),(0,d.jsxs)("div",{className:"".concat((0,l.Z)(w().comment,"flex mt-[24px] md:mt-[20px] relative")),children:[(0,d.jsx)("p",{id:"commentContent_".concat(b.id),className:(0,l.Z)("mx-4 px-4 md:px-0 md:mx-0 border-l-[3px] border-[#2E313C] md:pl-4 font-casual not-italic font-normal text-base leading-[150%] tracking-[0.03em] text-white overflow-hidden text-ellipsis",m?"max-h-fit":"max-h-[168px]"),children:b.comment}),h&&!m&&(0,d.jsx)("div",{className:"".concat(w().blur)})]}),!m&&h&&(0,d.jsx)("div",{className:"w-full flex justify-end pr-4 md:pr-0",children:(0,d.jsx)("div",{className:"w-fit capitalize font-semibold text-gamefiGreen-500 text-sm leading-5 cursor-pointer hover:underline hover:opacity-95 mt-1 font-casual",onClick:function(){return n(!0)},children:"Read More"})}),(0,d.jsxs)("div",{className:"flex justify-between px-4 md:px-0 md:pb-0 pb-4 items-center mt-[32px] md:mt-[45px]",children:[(0,d.jsxs)("div",{className:(0,l.Z)("flex gap-4 md:gap-[40px]"),children:[(0,d.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,d.jsx)(t.Z,{selected:!1,activeColor:"black",inactiveColor:"white",size:"16px"}),(0,d.jsx)("p",{className:"font-casual not-italic font-medium text-[13px] leading-[150%] text-white opacity-60",children:(0,o.Lv)(b.likeCount||"-")})]}),(0,d.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,d.jsx)(u.Z,{selected:!1,activeColor:"black",inactiveColor:"white",size:"16px"}),(0,d.jsx)("p",{className:"font-casual not-italic font-medium text-[13px] leading-[150%] text-white opacity-60",children:(0,o.Lv)(b.dislikeCount||"-")})]})]}),(0,d.jsx)("div",{className:"font-casual font-medium text-[13px] leading-[12px] opacity-60 text-white",children:v&&(0,s.Z)(new Date(v),q?"d LLL, yyyy - hh:mm:ss OOO":"d LLL, yyyy")})]})]})};function y(){return(0,d.jsxs)("div",{className:(0,l.Z)(w().comment_skeleton,"flex flex-col w-full bg-[#21232A] rounded-[4px] overflow-hidden animate-pulse p-6"),children:[(0,d.jsxs)("div",{className:"flex w-full gap-7 mb-[22px]",children:[(0,d.jsx)("div",{className:"w-[60px] h-[60px] rounded-sm bg-[#30343F]"}),(0,d.jsxs)("div",{className:"flex flex-col flex-1 justify-center",children:[(0,d.jsx)("div",{className:"w-1/2 bg-[#30343F] rounded-sm h-5 mb-2"}),(0,d.jsx)("div",{className:"w-1/4 bg-[#30343F] rounded-sm h-3"})]})]}),(0,d.jsx)("div",{className:"flex w-full h-fit",children:(0,d.jsxs)("div",{className:"flex flex-col gap-3 w-full border-l-[3px] border-[#30343F] pl-4 py-1",children:[(0,d.jsx)("div",{className:"w-full bg-[#30343F] rounded-sm h-4"}),(0,d.jsx)("div",{className:"w-10/12 bg-[#30343F] rounded-sm h-4"}),(0,d.jsx)("div",{className:"w-full bg-[#30343F] rounded-sm h-4"}),(0,d.jsx)("div",{className:"w-10/12 bg-[#30343F] rounded-sm h-4"}),(0,d.jsx)("div",{className:"w-full bg-[#30343F] rounded-sm h-4"})]})}),(0,d.jsxs)("div",{className:"flex w-full mt-[45px] justify-between items-center",children:[(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,d.jsx)("div",{className:"w-4 h-4 rounded bg-[#30343F]"}),(0,d.jsx)("div",{className:"w-[40px] h-[10px] rounded bg-[#30343F]"})]}),(0,d.jsxs)("div",{className:"flex gap-3 items-center ml-10",children:[(0,d.jsx)("div",{className:"w-4 h-4 rounded bg-[#30343F]"}),(0,d.jsx)("div",{className:"w-[40px] h-[10px] rounded bg-[#30343F]"})]})]}),(0,d.jsx)("div",{className:"w-[170px] h-[10px] rounded bg-[#30343F]"})]})]})}var z=function(a){var b,c=a.comments,f=a.totalComment,g=(0,k.useRouter)(),h=g.query,m=(0,e.useState)(!1),r=m[0],s=m[1],t=(0,e.useState)(1),u=t[0],v=t[1],z=(0,e.useState)(!1),A=z[0],B=z[1],C=(0,e.useState)(c),D=C[0],E=C[1],F=(0,q.Z)().accountHub,G=function(){clearTimeout(b),b=setTimeout(function(){var a=document.getElementById("detectBottomComment"),b=null==a?void 0:a.getBoundingClientRect();b&&b.top>=0&&b.left>=0&&b.right<=(window.innerWidth||document.documentElement.clientWidth)&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&(r||B(!0))},300)};return(0,e.useEffect)(function(){v(1),E(c),B(!1)},[g.query.id]),(0,e.useEffect)(function(){var a=document.getElementById("layoutBody");return a.addEventListener("scroll",G),function(){return a.removeEventListener("scroll",G)}},[]),(0,e.useEffect)(function(){if(!(D.length>=f||u+1>Math.ceil(f/i.AL))&&A&&!r){var a=h.status,b=Array.isArray(a)?a[0]:a,c=g.query.id||(null==F?void 0:F.id),d=b in i.Ef?a:i.Ef.PUBLISHED;s(!0);var e=u+1;(0,o._i)("/api/hub/reviews",{method:"POST",body:JSON.stringify({query:"GET_REVIEWS_AND_COMMENTS_BY_USER",variables:{reviewFilterValue:{author:{id:{eq:c}},status:{eq:d}},reviewPagination:{page:e,pageSize:i.hT},commentFilterValue:{user:{id:{eq:c}},review:{id:{ne:null}}},commentPagination:{page:e,pageSize:i.AL},userId:c}})}).then(function(a){var b=(0,p.F)(a.data);b.comments.length;var c=(0,j.Z)(D).concat((0,j.Z)(b.comments));E(c)}).finally(function(){s(!1),B(!1),v(e)})}},[A,F]),(0,d.jsxs)("div",{className:(0,l.Z)(w().tab_comment,"mt-6"),children:[D.map(function(a,b){return(0,d.jsx)(x,{data:a},"acc_review_".concat(b))}),n()(D)&&(0,d.jsx)("div",{children:"No comment found"}),(0,d.jsx)("div",{id:"detectBottomComment",className:"w-full h-[1px]"}),r&&(0,d.jsx)(y,{})]})},A=function(a){var b=a.data,c=a.status,f=a.showReviewFilter,j=a.user,k=a.meta,l=(0,e.useState)(0),m=l[0],n=l[1],o=g()(b,"commentMeta.meta.pagination.total",0),p=g()(b,"reviewMeta.meta.pagination.total",0),q=function(a){n(a)};return(0,d.jsxs)("div",{id:"tabReview",children:[(0,d.jsx)(h.m,{titles:["Reviews","Comments"],currentValue:m,onChange:q,className:"mt-2 sm:mt-6 lg:mt-10 sticky top-0 bg-gamefiDark-900 z-50"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(h.x,{value:m,index:0,children:(0,d.jsx)(i.ZP,{user:j,status:c,totalReviews:p,reviews:b.reviews,showFilter:void 0!==f&&f,meta:void 0===k?{}:k})}),(0,d.jsx)(h.x,{value:m,index:1,children:(0,d.jsx)(z,{comments:b.comments,totalComment:o})})]})]})}},62023:function(a){a.exports={menus:"tabs_menus__LLF6v",menu:"tabs_menu__MkEqd",active:"tabs_active__asMRs"}}}])