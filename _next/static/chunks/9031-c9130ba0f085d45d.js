(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9031],{77188:function(a,b,c){"use strict";c.r(b),b.default={src:"/_next/static/media/avatar2.052a220b.png",height:164,width:164,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAWlBMVEW9hrL0t+dzVGvjntO0d6lVNiB3cGzcm86GZHxgPjfsr+BBQDaYaWTVic92EX3nm+FvUUSBL3PSlL70rOj4sO7/tfUZGREICAVHLx75su3/wftRMR+OEJzZet6aYyMQAAAAE3RSTlP+/v7+/v7+/v7+/v7+/v7+/v7+nnKtnQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEVJREFUCJkdykkSgCAMBMBRQcBdJwng8v9vWnrrQ4PSxBZCcOizjVCoy2YWFRJSKQUKcvLXFgSULvnjyzzdvtYfz73M9QWFVAQF9eg1rgAAAABJRU5ErkJggg=="}},23070:function(a,b,c){"use strict";c.d(b,{M:function(){return h},s:function(){return i}});var d=c(85893),e=c(67294),f=c(40306),g=c.n(f),h=function(a){var b=a.className;return(0,e.useEffect)(function(){var a=function(){var b=document.getElementById("loading-content");b&&(b.classList.add("dots--animate"),setTimeout(function(){b.classList.remove("dots--animate"),setTimeout(function(){a()},300)},1500))};a()},[]),(0,d.jsxs)("div",{className:"".concat(b," text-2xl font-bold"),children:["Loading",(0,d.jsxs)("div",{id:"loading-content",className:"dots",children:[(0,d.jsx)("span",{className:"dot z"}),(0,d.jsx)("span",{className:"dot f"}),(0,d.jsx)("span",{className:"dot s"}),(0,d.jsx)("span",{className:"dot t",children:(0,d.jsx)("span",{className:"dot l"})})]})]})},i=function(a){var b=a.className;return(0,d.jsx)("div",{className:"".concat(g().spinning," ").concat(b)})}},65059:function(a,b,c){"use strict";c.d(b,{Z:function(){return k}});var d=c(26042),e=c(99534),f=c(85893),g=c(67294),h=c(25675),i=c.n(h),j=function(a){var b=a.url,h=a.size,j=void 0===h?64:h,k=(0,e.Z)(a,["url","size"]),l=(0,g.useState)(b),m=l[0],n=l[1];(0,g.useEffect)(function(){n(b)},[b]);var o=function(){n("/defaultAvatar.png")};return(0,f.jsx)(i(),(0,d.Z)({width:j,height:j,src:m||c(77188),alt:"avatar",onError:o},k))},k=j},79031:function(a,b,c){"use strict";var d=c(47568),e=c(26042),f=c(69396),g=c(10253),h=c(34051),i=c.n(h),j=c(85893),k=c(67294),l=c(25675),m=c.n(l),n=c(11163),o=c(86010),p=c(86501),q=c(87536),r=c(29208),s=c.n(r),t=c(21405),u=c(9005),v=c(8899),w=c(26613),x=c(23070),y=c(65059),z=c(19885),A=c.n(z),B=["image/png","image/jpeg","image/webp","image/gif"];b.Z=function(a){var b=a.editable,h=a.data,l=a.totalReviewOfAllStatus,r=a.tierMine,z=void 0===r?{}:r,C=a.email,D=(0,k.useState)(!1),E=D[0],F=D[1],G=(0,k.useState)(!1),H=G[0],I=G[1],J=(0,k.useState)(s()(h,"avatar.url")||""),K=J[0],L=J[1],M=(0,t.Z)().connectWallet,N=h||{},O=N.username,P=N.firstName,Q=N.lastName,R=N.avatar,S=N.walletAddress,T=P,U=Q,V=(0,q.cI)({defaultValues:{avatar:K,username:O,firstName:P,lastName:Q}}),W=V.register,X=V.formState.errors,Y=V.handleSubmit,Z=V.setValue,$=V.reset,_=(0,n.useRouter)(),aa=(0,v.OP)(),ab=(0,k.useMemo)(function(){var a="",b=s()(h,"firstName"),c=s()(h,"lastName"),d=s()(h,"walletAddress");return b&&(a+=b),c&&(a+=" ".concat(c)),(a=a.trim())||(a="Anonymous-".concat(null==d?void 0:d.slice(-5))),a},[h]),ac=(0,k.useMemo)(function(){var a="";return(null==h?void 0:h.rank)&&(a+=null==h?void 0:h.rank),h.level&&(a+=a?" - Level ".concat(null==h?void 0:h.level):"Level ".concat(null==h?void 0:h.level)),a||""},[null==h?void 0:h.level,null==h?void 0:h.rank]),ad="/account/review"===_.route,ae=ad?void 0===l?0:l:s()(h,"reviewCount")||0,af=function(){var a=!E;a&&(ak(),$({firstName:T,lastName:U,username:O})),F(a)},ag=function(a){if(!H){var b;I(!0),M().then((b=(0,d.Z)(i().mark(function b(c){var d,e,f,g,h,j,k,l,m,n,o,q;return i().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!c.error){b.next=4;break}return I(!1),p.ZP.error("Could not update info"),b.abrupt("return");case 4:if(b.prev=4,d=a.username,e=a.firstName,f=a.lastName,g=a.avatar,h=c.walletAddress,j=c.signature,k=s()(R,"id",null),!(null==g?void 0:g.length)){b.next=15;break}return(l=new FormData).append("files",g[0]),b.next=13,(0,u._i)("/api/hub/upload",{method:"POST",body:l,headers:{"X-Signature":j,"X-Wallet-Address":h}});case 13:(m=b.sent)&&m.length&&(n=s()(m,"[0].id"))&&(k=n);case 15:return o={username:d,firstName:e,lastName:f,avatar:k},C&&C.match(/\S+@\S+\.\S+/)&&!C.match(/\*\**/)&&(o.email=C),b.next=19,(0,u._i)("/api/hub/profile/update",{method:"POST",body:JSON.stringify(o),headers:{"X-Signature":j,"X-Wallet-Address":h}});case 19:q=b.sent,I(!1),(null==q?void 0:q.error)?p.ZP.error("Could not update info"):(_.replace(_.asPath),F(!1),p.ZP.success("update successfully")),b.next=28;break;case 24:b.prev=24,b.t0=b.catch(4),I(!1),p.ZP.error(b.t0.message||"Could not update info");case 28:case"end":return b.stop()}},b,null,[[4,24]])})),function(a){return b.apply(this,arguments)})).catch(function(a){I(!1),p.ZP.error((null==a?void 0:a.toString())||"Could not sign the authentication message")})}},ah=function(){Y(ag)()},ai=function(){var a=document.getElementById("uploadAvatarInput");if(a){var b=a.files[0];if(b){if(!B.includes(b.type))return p.ZP.error("Invalid image type");L(URL.createObjectURL(b))}}},aj=function(a){a.preventDefault();var b=a.dataTransfer.files;if(!Array.isArray(b)||!(b.length>1)){var c=(0,g.Z)(b,1)[0];if(!B.includes(c.type))return p.ZP.error("Invalid image type");L(URL.createObjectURL(c)),Z("avatar",b)}},ak=function(){if(!H){L(null);var a=document.getElementById("uploadAvatarInput");a&&(a.value=null)}},al=function(a){H||(null!==a|| void 0!==a?F(a):F(!E))};return(0,j.jsxs)("div",{className:(0,o.Z)(A().profile,"w-full rounded-[4px] p-2 md:p-4 flex gap-[28px] overflow-hidden relative"),children:[(0,j.jsx)("div",{className:(0,o.Z)(A().avatar,"rounded-[3px] w-[60px] h-[60px] md:w-[164px] md:h-[164px] overflow-hidden"),children:(0,j.jsx)(y.Z,{size:aa.mobile&&aa.tablet?60:164,url:s()(h,"avatar.url","")})}),(0,j.jsxs)("div",{className:(0,o.Z)(A().info,"flex justify-center flex-col"),children:[(0,j.jsx)("div",{className:"font-casual not-italic font-semibold md:text-base text-sm leading-[100%] tracking-[0.03px] text-white mb-[8px] md:mb-[10px]",children:ab}),(0,j.jsx)("div",{className:"font-casual font-medium text-sm leading-[100%] tracking-[0.03px] text-white/60 mb-[8px] md:mb-[10px]",children:(null==h?void 0:h.username)===S?(0,u.OV)(S):null==h?void 0:h.username}),(0,j.jsx)("div",{className:"font-casual font-medium text-[13px] md:text-sm leading-[100%] text-white opacity-60 mb-2 md:mb-[34px]",children:ac}),(!aa.mobile||!aa.tablet)&&(0,j.jsxs)("div",{className:"flex",children:[(0,j.jsxs)("div",{className:"flex gap-[10px]",children:[(0,j.jsx)("div",{className:"w-4 h-4",children:(0,j.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("path",{d:"M16 2L12 6L8 2L4 6L0 2V13C0 13.5523 0.447715 14 1 14H15C15.5523 14 16 13.5523 16 13V2Z",fill:"#53545A"})})}),(0,j.jsx)("div",{className:"font-casual font-semibold not-italic text-[13px] text-white",children:(0,j.jsx)("span",{className:"font-semibold font-casual ".concat((null==z?void 0:z.id)?"":"text-yellow-300"),children:(null==z?void 0:z.name)||"Loading..."})})]}),(0,j.jsx)("div",{className:"mx-8",children:(0,j.jsx)("svg",{width:"1",height:"14",viewBox:"0 0 1 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("rect",{opacity:"0.2",y:"0.5",width:"1",height:"13",fill:"#D9D9D9"})})}),(0,j.jsxs)("div",{className:"flex gap-[10px]",children:[(0,j.jsx)("div",{className:"w-4 h-4",children:(0,j.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("path",{d:"M1 0H15C15.552 0 16 0.448 16 1V11C16 11.552 15.552 12 15 12H10L4 16V12H1C0.448 12 0 11.552 0 11V1C0 0.448 0.448 0 1 0Z",fill:"#53545A"})})}),(0,j.jsx)("div",{className:"font-casual font-semibold not-italic text-[13px] text-white",children:"".concat((0,u.Lv)(ae)," ").concat(ae>1?"Reviews":"Review")})]})]})]}),void 0!==b&&b&&(0,j.jsxs)("button",{onClick:af,className:"flex items-center absolute top-4 right-4 gap-2 cursor-pointer uppercase font-bold font-[13px] leading-[150%] tracking-[0.02em] text-gamefiGreen-700 mr-0 md:mr-8 hover:opacity-90",children:[(0,j.jsx)(m(),{src:c(44334),alt:"button_edit"}),(0,j.jsx)("span",{className:"font-mechanic font-bold text-[13px] leading-[150%] tracking-[0.02em] text-gamefiGreen-600",children:"Edit Profile"})]}),(0,j.jsx)(w.Z,{show:E,toggle:al,className:"dark:bg-transparent fixed z-50",children:(0,j.jsx)("div",{className:"bg-gamefiDark-700",children:(0,j.jsxs)("div",{className:"p-4 md:p-8 pt-10 text-white",children:[(0,j.jsx)("div",{className:"uppercase font-bold text-2xl mb-8",children:"Update Profile"}),(0,j.jsx)("form",{className:"w-full m-auto pb-2 md:pb-8",children:(0,j.jsxs)("div",{className:"flex flex-col md:flex-row gap-10",children:[(0,j.jsx)("div",{className:"mx-auto md:mx-0 w-[150px] h-[150px] md:w-[237px] md:h-[237px] relative",children:(0,j.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,j.jsxs)("div",{className:(0,o.Z)("flex flex-col items-center justify-center w-full h-full border border-[#3A3A40] bg-[#303035]",K?"":"border-dashed hover:border-gamefiGreen-700"),children:[(0,j.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsxs)("g",{opacity:"0.2",children:[(0,j.jsx)("path",{d:"M16.6667 24.6673C20.3486 24.6673 23.3333 21.6825 23.3333 18.0007C23.3333 14.3188 20.3486 11.334 16.6667 11.334C12.9848 11.334 10 14.3188 10 18.0007C10 21.6825 12.9848 24.6673 16.6667 24.6673Z",stroke:"white",strokeMiterlimit:"10",strokeLinecap:"square"}),(0,j.jsx)("path",{d:"M28.6667 30.0006H4.66667C3.95942 30.0006 3.28115 29.7197 2.78105 29.2196C2.28095 28.7195 2 28.0412 2 27.334V10.0007C2 9.29341 2.28095 8.61513 2.78105 8.11503C3.28115 7.61494 3.95942 7.33398 4.66667 7.33398H10L12.6667 3.33398H20.6667L23.3333 7.33398H28.6667C29.3739 7.33398 30.0522 7.61494 30.5523 8.11503C31.0524 8.61513 31.3333 9.29341 31.3333 10.0007V27.334C31.3333 28.0412 31.0524 28.7195 30.5523 29.2196C30.0522 29.7197 29.3739 30.0006 28.6667 30.0006Z",stroke:"white",strokeMiterlimit:"10",strokeLinecap:"square"}),(0,j.jsx)("path",{d:"M5.99935 12.6667C6.73573 12.6667 7.33268 12.0697 7.33268 11.3333C7.33268 10.597 6.73573 10 5.99935 10C5.26297 10 4.66602 10.597 4.66602 11.3333C4.66602 12.0697 5.26297 12.6667 5.99935 12.6667Z",fill:"white"})]})}),(0,j.jsxs)("div",{className:"text-center pt-2 md:pt-5 font-casual text-xs md:text-sm tracking-wider text-gray-400 group-hover:text-gray-600",children:[(0,j.jsx)("span",{className:"text-gamefiGreen-700",children:"Browse "}),"your avatar or drag and drop image here"]}),(0,j.jsx)("input",(0,f.Z)((0,e.Z)({id:"uploadAvatarInput",className:"absolute top-0 left-0 opacity-0 w-full h-full cursor-pointer ",name:"avatar",type:"file"},W("avatar")),{onChange:ai,onDrop:aj})),!!K&&(0,j.jsxs)("div",{className:"absolute",children:[(0,j.jsx)("img",{src:K,alt:""}),(0,j.jsxs)("svg",{className:(0,o.Z)("cursor-pointer absolute top-4 right-4",K?"visible":"invisible"),width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:ak,children:[(0,j.jsx)("path",{d:"M2.5 5.5L3.365 14.149C3.40194 14.5191 3.57507 14.8623 3.85076 15.1119C4.12646 15.3615 4.48507 15.4999 4.857 15.5H11.143C11.5149 15.4999 11.8735 15.3615 12.1492 15.1119C12.4249 14.8623 12.5981 14.5191 12.635 14.149L13.5 5.5",stroke:"#6CDB00",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,j.jsx)("path",{d:"M0.5 3.5H15.5",stroke:"#6CDB00",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,j.jsx)("path",{d:"M5.5 3.5V0.5H10.5V3.5",stroke:"#6CDB00",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]})})}),(0,j.jsx)("div",{className:"flex-1",children:(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("div",{className:"mb-5",children:[(0,j.jsx)("div",{className:"text-sm mb-2 font-casual text-gamefiDark-350 text-[13px]",children:"Username *"}),(0,j.jsx)("input",(0,e.Z)({className:"bg-[#303035] border border-[#3C3C42] placeholder-white placeholder-opacity-30 font-casual text-sm rounded-sm px-4 py-1.5 w-full focus-visible:border-gamefiDark-350 disabled:cursor-not-allowed",name:"username",placeholder:"Your Username",autoFocus:!0,disabled:!0,maxLength:100},W("username",{required:!0,minLength:0,maxLength:50}))),X.username&&(0,j.jsx)("div",{className:"mt-2 text-normal text-red-500 ",children:"Username is required"})]}),(0,j.jsxs)("div",{className:"mb-5",children:[(0,j.jsx)("div",{className:"text-sm mb-2 font-casual text-gamefiDark-350 text-[13px]",children:"First Name *"}),(0,j.jsx)("input",(0,e.Z)({className:"bg-[#303035] border border-[#3C3C42] placeholder-white placeholder-opacity-30 font-casual text-sm rounded-sm px-4 py-1.5 w-full focus-visible:border-gamefiDark-350",name:"firstName",placeholder:"Your First Name",maxLength:100},W("firstName",{required:!0,minLength:0,maxLength:50}))),X.firstName&&(0,j.jsx)("div",{className:"mt-2 text-normal text-red-500 ",children:"First Name is required"})]}),(0,j.jsxs)("div",{className:"mb-5",children:[(0,j.jsx)("div",{className:"text-sm mb-2 font-casual text-gamefiDark-350 text-[13px]",children:"Last Name *"}),(0,j.jsx)("input",(0,e.Z)({className:"bg-[#303035] border border-[#3C3C42] placeholder-white placeholder-opacity-30 font-casual text-sm rounded-sm px-4 py-1.5 w-full focus-visible:border-gamefiDark-350",name:"lastName",placeholder:"Your Last Name"},W("lastName",{required:!0,minLength:0,maxLength:50}))),X.lastName&&(0,j.jsx)("div",{className:"mt-2 text-normal text-red-500 ",children:"Last Name is required"})]})]})})]})}),(0,j.jsxs)("div",{className:"flex justify-end h-9",children:[(0,j.jsx)("button",{className:"font-mechanic text-white/50 hover:text-gamefiGreen-200 clipped-b-l py-2 px-7 rounded leading-5 font-bold text-sm",onClick:af,disabled:H,children:"CANCEL"}),(0,j.jsx)("button",{className:"flex items-center justify-center w-36 overflow-hidden px-8 bg-gamefiGreen-700 text-gamefiDark-900 font-bold text-[13px] rounded-xs hover:opacity-95 cursor-pointer rounded-sm clipped-t-r ",onClick:ah,disabled:H,children:H?(0,j.jsx)(x.s,{className:"w-6 h-6"}):"UPDATE"})]})]})})})]})}},8899:function(a,b,c){"use strict";c.d(b,{OP:function(){return e}}),c(85893);var d=c(1852),e=function(){return{mobile:(0,d.useMediaQuery)({maxWidth:"640px"}),tablet:(0,d.useMediaQuery)({minWidth:"641px",maxWidth:"960px"}),md:(0,d.useMediaQuery)({minWidth:"961px",maxWidth:"1279px"}),lg:(0,d.useMediaQuery)({minWidth:"1280px",maxWidth:"1535px"}),xl:(0,d.useMediaQuery)({minWidth:"1536px"}),"2xl":(0,d.useMediaQuery)({minWidth:"1920px"})}}},21405:function(a,b,c){"use strict";var d=c(67294),e=c(75787),f=c(37033),g=c(9005),h=c(53645),i=c(79741),j=c(99245),k=c.n(j),l=function(){var a=(0,e.j)().account,b=(0,h.tN)().setShowModal,c=(0,f.ZP)().signMessage,j=(0,i.P0)(),l=j.showCaptcha,m=j.tokenCaptcha,n=j.resetToken,o=j.accountHub,p=j.setAccountHub;return{connectWallet:(0,d.useCallback)(function(d,e){return new Promise(function(f,h){if(!a){b(!0),h(Error("Please connect wallet"));return}var i=function(b){c().then(function(c){if(c||f({error:"Could not create account"}),!k()(o)){f({walletAddress:o.walletAddress,captcha:b||m,signature:c});return}var d={walletAddress:a,captcha:b||m};e&&(d.email=e),(0,g._i)("/api/hub/registerWallet",{method:"POST",body:JSON.stringify(d),headers:{"X-Signature":c,"X-Wallet-Address":a}}).then(function(a){var b,d;n(),a.error&&f({error:a}),(null===(b=a.data)|| void 0===b?void 0:b.walletAddress)||f({error:"Could not create account"}),p(a.data),f({walletAddress:null===(d=a.data)|| void 0===d?void 0:d.walletAddress,isRegister:!0,signature:c})}).catch(function(a){n(),console.debug("err",a)})}).catch(function(a){n(),h(a)})};if(d||k()(o)){l(i,h);return}i("")})},[a,o,b,c,m,n,p,l])}};b.Z=l},37033:function(a,b,c){"use strict";c.d(b,{gd:function(){return g}});var d=c(67294),e=c(75787);c(17271);var f=c(61105),g="Gamefi Signature",h=function(){var a=(0,e.j)(),b=a.library,c=a.account;return{signMessage:(0,d.useCallback)(function(){return new Promise(function(a,d){if(!b||!c){d(Error("Please connect wallet"));return}var e="SIGNATURE_".concat(c);if(null==window?void 0:window.sessionStorage){var h=window.sessionStorage.getItem(e);if(h&&f.n5(g,h).toLowerCase()===c.toLowerCase()){a(h);return}}b.getSigner().signMessage(g).then(function(b){(null==window?void 0:window.sessionStorage)&&window.sessionStorage.setItem(e,b),a(b)}).catch(function(a){d(a||"Something went wrong when signing message")})})},[b,c])}};b.ZP=h},40306:function(a){a.exports={spinning:"animation_spinning__i7o2w",spin:"animation_spin__t6qS_"}},39474:function(a,b,c){"use strict";function d(a){if(Array.isArray(a))return a}c.d(b,{Z:function(){return d}})},53128:function(a,b,c){"use strict";function d(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}c.d(b,{Z:function(){return d}})},10253:function(a,b,c){"use strict";c.d(b,{Z:function(){return h}});var d=c(39474),e=c(13375),f=c(53128),g=c(91566);function h(a,b){return(0,d.Z)(a)||(0,e.Z)(a,b)||(0,g.Z)(a,b)||(0,f.Z)()}}}])